<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Surprise Page</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container" id="output"></div>

  <script>
    function calculateAge(dob) {
      const birthDate = new Date(dob);
      const now = new Date();
      const diffMs = now - birthDate;

      if (isNaN(diffMs) || diffMs < 0) return null;

      const years = now.getFullYear() - birthDate.getFullYear();
      const months = now.getMonth() - birthDate.getMonth();
      const days = now.getDate() - birthDate.getDate();

      const totalSeconds = Math.floor(diffMs / 1000);
      const totalMinutes = Math.floor(totalSeconds / 60);
      const totalHours = Math.floor(totalMinutes / 60);
      const totalDays = Math.floor(totalHours / 24);

      return { years, months, days, totalSeconds, totalMinutes, totalHours, totalDays };
    }

    const name = localStorage.getItem("bday_name");
    const dob = localStorage.getItem("bday_dob");

    const output = document.getElementById("output");

    if (!name || !dob) {
      output.innerHTML = "<h2>Couldnâ€™t fetch your details! Please go back and try again.</h2>";
    } else {
      const age = calculateAge(dob);
      if (!age) {
        output.innerHTML = "<h2>Invalid Date of Birth. Please go back and enter correctly.</h2>";
      } else {
        output.innerHTML = `
          <h1>ðŸŽ‰ Happy Birthday, ${name}! ðŸŽ‰</h1>
          <p>You are now:</p>
          <ul>
            <li><strong>${age.years}</strong> years old</li>
            <li><strong>${age.months}</strong> months</li>
            <li><strong>${age.days}</strong> days</li>
            <li><strong>${age.totalMinutes}</strong> minutes lived</li>
            <li><strong>${age.totalSeconds}</strong> seconds alive!</li>
          </ul>
          <p>Let me go now and do some chills... You enjoy your birthday, ${name}! ðŸŽ‚</p>
        `;
      }
    }
  </script>
</body>
</html>
